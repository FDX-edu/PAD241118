# 게시물 등록 감지하여 클라우드 흐름 실행

### Teams에서 키워드가 포함된 게시물 등록 확인되면, Cloud Flow에서 데스크톱 흐름에 검색 키워드 전달

1. 기존 트리거 (Manually trigger a flow) 삭제 후, Add a trigger 클릭

2. 트리거 목록에서 **When Keywords are mentioned** 검색 후 선택하여 트리거 추가

```
When Keywords are mentioned
```
<br>

![image](https://github.com/user-attachments/assets/799a06a8-f702-4465-aa44-b5b8315d85b1)

<br>
<br>

3. When Keywords are mentioned (키워드가 멘션될 때) 클릭 후, 왼편 패널의 각 항목별 값 입력
```
- Keywords to search for: news
- Message type: Channel
- Channels: General
- Team: MSFT
```

![img4](https://github.com/user-attachments/assets/4c46bd81-8df6-4198-a161-83a497f18c19)

<br>
<br>

![image](https://github.com/user-attachments/assets/b746f7ad-55db-40df-a927-79dbd8cebdbd)

<br>
<br>

# 클라우드 흐름 내에서 데스크톱 흐름 호출

1. 트리거 하단 **+** -> **Add an action** 클릭
   
![image](https://github.com/user-attachments/assets/c7130414-e086-4cbf-b1c0-27f5fdf339b7)

<br>

2. 

4. 



<br>
<br>
<br>
<br>
<br>
<br>

2. 가져온 본문 내용을 콜론(:) 문자를 기준으로 분할 후, 콜론(:) 뒷 부분을 데스크톱 흐름에 전달

![image](https://github.com/user-attachments/assets/c64b901c-4111-464d-a604-7d8f34a53e10)

<br>
<br>

![img2](https://github.com/user-attachments/assets/50f411ad-21b6-45bf-9290-62ff0ff1fb08)

![image](https://github.com/user-attachments/assets/4eb8c4c2-fffc-4e95-997a-f6d0616ca366)

```
last(split(outputs('Get_message_details')?['body/body/plainTextContent'], ':'))
```
### [설명]
Get_message_details라는 액션의 출력값에서<br>
body/body/plainTextContent (본문의 텍스트 내용) 을 가져와서, <br>
문자열을 콜론(:) 문자를 기준으로 분할하여 배열로 반환 후, <br>
배열의 마지막 항목을 가져옵니다. <br>

<br>
<br>

![image](https://github.com/user-attachments/assets/997da455-d2a7-4afe-b2c2-84e04ca4659a)

<br>
<br>

1. Teams의 **general** 채널에 **news**라는 키워드를 본문에 포함한 게시물 등록 감지 
<br>
<br>

![image](https://github.com/user-attachments/assets/f896feff-7775-4319-8f58-42123dfef24b)

2. 

![image](https://github.com/user-attachments/assets/a9f4345b-782c-466f-b0d8-96d082d87d2c)





